<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة الإدارة</title>

<link rel="stylesheet" href="css/style.css">

<style>
body{
background:#0f0f0f;
color:white;
padding:20px;
}

.box{
background:#111;
padding:20px;
border-radius:10px;
max-width:500px;
margin:auto;
}

h2{
text-align:center;
margin-bottom:20px;
color:gold;
}

input{
width:100%;
padding:10px;
margin:8px 0;
background:#111;
border:1px solid gold;
color:white;
border-radius:8px;
}

.btn{
background:gold;
color:black;
padding:10px;
border:none;
cursor:pointer;
margin-top:10px;
width:100%;
font-weight:bold;
}

.product-item{
background:#1a1a1a;
padding:10px;
margin-top:10px;
border-radius:8px;
}
</style>

</head>
<body>

<!-- ===== تسجيل الدخول ===== -->

<div class="box" id="loginBox">
<h2>تسجيل دخول الإدارة</h2>

<input type="password" id="adminPass" placeholder="أدخل الكود السري">
<button onclick="login()" class="btn">دخول</button>

</div>

<!-- ===== لوحة التحكم ===== -->

<div class="box" id="adminPanel" style="display:none;">

<h2>لوحة التحكم</h2>

<input type="text" id="pName" placeholder="اسم المنتج">
<input type="number" id="pPrice" placeholder="الثمن">
<input type="number" id="pStock" placeholder="المخزون">
<input type="text" id="pImage" placeholder="رابط الصورة">

<button onclick="addProduct()" class="btn">إضافة منتج</button>

<button onclick="logout()" class="btn" style="background:red;margin-top:10px;">
تسجيل الخروج
</button>

<h3 style="margin-top:20px;">المنتجات الحالية:</h3>

<div id="productList"></div>

</div>

<script>

/* ===== حماية الصفحة ===== */

if(localStorage.getItem("adminLoggedIn") !== "true"){
document.getElementById("loginBox").style.display="block";
}else{
document.getElementById("loginBox").style.display="none";
document.getElementById("adminPanel").style.display="block";
}

/* ===== تسجيل الدخول ===== */

function login(){

let pass=document.getElementById("adminPass").value;

if(pass==="1995"){ // الكود السري

localStorage.setItem("adminLoggedIn","true");

document.getElementById("loginBox").style.display="none";
document.getElementById("adminPanel").style.display="block";

loadProducts();

}else{
alert("كود خاطئ ❌");
}

}

/* ===== تسجيل الخروج ===== */

function logout(){
localStorage.removeItem("adminLoggedIn");
location.reload();
}

/* ===== تحميل المنتجات ===== */

function loadProducts(){

let products=JSON.parse(localStorage.getItem("products")) || [];

const list=document.getElementById("productList");
list.innerHTML="";

products.forEach((p,index)=>{

list.innerHTML+=`
<div class="product-item">
<strong>${p.name}</strong><br>
الثمن: ${p.price} DH<br>
المخزون: ${p.stock}<br>
<button onclick="deleteProduct(${index})" class="btn" style="background:red;margin-top:5px;">
حذف
</button>
</div>
`;

});

}

/* ===== إضافة منتج ===== */

function addProduct(){

let name=document.getElementById("pName").value;
let price=document.getElementById("pPrice").value;
let stock=document.getElementById("pStock").value;
let image=document.getElementById("pImage").value;

if(!name || !price || !stock || !image){
alert("عمر جميع الحقول ❌");
return;
}

let products=JSON.parse(localStorage.getItem("products")) || [];

products.push({
id:Date.now(),
name:name,
price:Number(price),
stock:Number(stock),
image:image
});

localStorage.setItem("products",JSON.stringify(products));

alert("تمت الإضافة ✅");

document.getElementById("pName").value="";
document.getElementById("pPrice").value="";
document.getElementById("pStock").value="";
document.getElementById("pImage").value="";

loadProducts();
}

/* ===== حذف ===== */

function deleteProduct(index){

let products=JSON.parse(localStorage.getItem("products")) || [];

products.splice(index,1);

localStorage.setItem("products",JSON.stringify(products));

loadProducts();
}

/* ===== عند تحميل الصفحة ===== */

document.addEventListener("DOMContentLoaded",()=>{
if(localStorage.getItem("adminLoggedIn")==="true"){
loadProducts();
}
});

</script>

</body>
</html>