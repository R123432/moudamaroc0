<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة التحكم - Moda Maroc</title>

<style>
body{
font-family:'Cairo',sans-serif;
background:#f4f4f4;
padding:40px;
}

input,textarea{
width:100%;
padding:10px;
margin-bottom:15px;
border-radius:8px;
border:1px solid #ccc;
}

button{
padding:8px 15px;
background:#111;
color:white;
border:none;
border-radius:20px;
cursor:pointer;
margin-top:5px;
}

.card{
background:white;
padding:15px;
margin-top:10px;
border-radius:10px;
box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

#loginBox{
max-width:300px;
margin:auto;
margin-top:100px;
}
</style>
</head>
<body>

<div id="loginBox">
<h3>دخول لوحة التحكم</h3>
<input type="password" id="password" placeholder="ادخل كلمة السر">
<button onclick="login()">دخول</button>
</div>

<div id="adminPanel" style="display:none;">

<h2>لوحة تحكم Moda Maroc</h2>

<input type="text" id="name" placeholder="اسم المنتج">
<input type="number" id="price" placeholder="الثمن الجديد">
<input type="number" id="oldPrice" placeholder="الثمن القديم">
<textarea id="description" placeholder="وصف المنتج"></textarea>

<h4>اختر صور المنتج</h4>
<input type="file" id="images" multiple accept="image/*">

<button onclick="addProduct()">إضافة المنتج</button>

<h3>المنتجات الحالية</h3>
<div id="list"></div>

</div>

<script>

function login(){
let pass=document.getElementById("password").value;
if(pass==="2025"){
document.getElementById("loginBox").style.display="none";
document.getElementById("adminPanel").style.display="block";
}else{
alert("كلمة السر غير صحيحة");
}
}

let products = JSON.parse(localStorage.getItem("products")) || [];

function addProduct(){

let name=document.getElementById("name").value;
let price=document.getElementById("price").value;
let oldPrice=document.getElementById("oldPrice").value;
let description=document.getElementById("description").value;
let files=document.getElementById("images").files;

if(!name || !price || files.length===0){
alert("المرجو ملء المعلومات وإضافة صور");
return;
}

let imagesArray=[];
let loaded=0;

for(let i=0;i<files.length;i++){
let reader=new FileReader();
reader.onload=function(e){
imagesArray.push(e.target.result);
loaded++;
if(loaded===files.length){
saveProduct();
}
};
reader.readAsDataURL(files[i]);
}

function saveProduct(){
products.push({
name,
price,
oldPrice,
description,
images:imagesArray
});

localStorage.setItem("products",JSON.stringify(products));
alert("تمت الإضافة بنجاح");
location.reload();
}
}

function displayList(){
let list=document.getElementById("list");
list.innerHTML="";

products.forEach((p,index)=>{
list.innerHTML+=`
<div class="card">
${p.name} - ${p.price} درهم
<button onclick="deleteProduct(${index})">حذف</button>
</div>
`;
});
}

function deleteProduct(index){
products.splice(index,1);
localStorage.setItem("products",JSON.stringify(products));
location.reload();
}

displayList();

</script>

</body>
</html>