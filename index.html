<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MoudaMaroc</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
body{margin:0;font-family:Segoe UI;background:#f4f7ff;direction:rtl}
header{background:white;padding:15px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 15px rgba(0,0,0,.05)}
.logo{font-size:24px;font-weight:bold;color:#0a3d62}
.social a{margin-left:10px;font-size:20px;color:#0a3d62}

.hero{height:220px;background:url('https://images.unsplash.com/photo-1521335629791-ce4aec67dd53?q=80&w=1200') center/cover;border-radius:0 0 30px 30px}

.offer{background:#ff4757;color:white;text-align:center;padding:10px;font-weight:bold}

.categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;padding:20px}
.cat{background:white;padding:20px;border-radius:20px;text-align:center;cursor:pointer;box-shadow:0 5px 20px rgba(0,0,0,.05);font-weight:bold}

.products{display:none;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:20px;padding:20px}

.product{background:white;border-radius:20px;padding:15px;box-shadow:0 10px 25px rgba(0,0,0,.05);transition:.3s}
.product:hover{transform:translateY(-5px)}
.product img{width:100%;height:200px;object-fit:cover;border-radius:15px}
.price{font-weight:bold;color:#0a3d62}
.old{text-decoration:line-through;color:gray;font-size:13px}
.stars{color:gold}
button{border:none;padding:8px 12px;border-radius:20px;margin-top:8px;cursor:pointer}
.add{background:#0a3d62;color:white;width:100%}

.cart-btn{position:fixed;bottom:20px;left:20px;background:#0a3d62;color:white;padding:15px;border-radius:50%}
.admin-trigger{position:fixed;top:50%;right:0;background:#0a3d62;color:white;padding:8px;border-radius:10px 0 0 10px;cursor:pointer}

.panel,.dashboard{display:none;position:fixed;top:0;right:0;height:100%;overflow:auto;padding:20px;z-index:1000}
.panel{width:350px;background:white}
.dashboard{width:420px;background:#0a3d62;color:white}

input,select{width:100%;padding:8px;margin:5px 0;border-radius:8px;border:1px solid #ddd}
.admin-box{background:white;color:black;padding:8px;border-radius:8px;margin-top:5px}
</style>
</head>

<body>

<header>
<div class="logo">MoudaMaroc</div>
<div class="social">
<a href="https://www.instagram.com/moudamaroc0" target="_blank"><i class="fab fa-instagram"></i></a>
<a href="https://tiktok.com/@moudamaroc0" target="_blank"><i class="fab fa-tiktok"></i></a>
</div>
</header>

<div class="hero"></div>

<div class="offer">ğŸ”¥ Ø¹Ø±Ø¶ Ø§Ù„ÙŠÙˆÙ… ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„: <span id="countdown"></span></div>

<div class="categories" id="categories"></div>
<div class="products" id="products"></div>

<div class="cart-btn" onclick="openCart()"><i class="fas fa-shopping-cart"></i></div>
<div class="admin-trigger" onclick="openAdmin()">âš™</div>

<div class="panel" id="cartPanel">
<h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
<div id="cartItems"></div>
<h4 id="total"></h4>
<input id="coupon" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…">
<input id="cname" placeholder="Ø§Ù„Ø§Ø³Ù…">
<input id="cphone" placeholder="Ø§Ù„Ù‡Ø§ØªÙ">
<input id="ccity" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©">
<input id="caddress" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
<button style="background:#25D366;color:white;width:100%" onclick="sendOrder()">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
<button onclick="closeCart()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<div class="dashboard" id="dashboard">
<h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
<input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="pprice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input id="pold" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…">
<input id="pcat" placeholder="Ø§Ù„Ù‚Ø³Ù…">
<input id="prating" type="number" max="5" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø¬ÙˆÙ… 1-5">
<input type="file" id="pimg">
<input type="hidden" id="editIndex">
<button onclick="saveProduct()">Ø­ÙØ¸</button>
<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
<div id="adminProducts"></div>
<h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
<div id="stats"></div>
<button onclick="closeDashboard()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<script>
let products=JSON.parse(localStorage.getItem("products"))||[];
let cart=[];
let orders=JSON.parse(localStorage.getItem("orders"))||[];
let whatsapp="212712120673";

let categories=["Ù…Ù„Ø§Ø¨Ø³ Ø±Ø¬Ø§Ù„ÙŠØ©","Ù…Ù„Ø§Ø¨Ø³ Ù†Ø³Ø§Ø¦ÙŠØ©","Ù…Ù„Ø§Ø¨Ø³ Ø£Ø·ÙØ§Ù„","Ù…Ø¹Ø¯Ø§Øª Ø±ÙŠØ§Ø¶ÙŠØ©","Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©","Ù…Ø±Ø§Ù‡Ù…"];

function saveAll(){
localStorage.setItem("products",JSON.stringify(products));
localStorage.setItem("orders",JSON.stringify(orders));
displayProducts();
displayAdmin();
}

function displayCategories(){
categories.forEach(c=>{
document.getElementById("categories").innerHTML+=
`<div class="cat" onclick="showProducts('${c}')">${c}</div>`;
});
}

function showProducts(cat){
document.getElementById("products").style.display="grid";
let box=document.getElementById("products");
box.innerHTML="";
products.filter(p=>p.cat==cat).forEach((p,i)=>{
box.innerHTML+=`
<div class="product">
<img src="${p.img}">
<h3>${p.name}</h3>
<div class="stars">${"â˜…".repeat(p.rating||0)}</div>
<div class="price">${p.price} DH ${p.old?`<span class="old">${p.old} DH</span>`:''}</div>
<button class="add" onclick="addToCart(${i})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
</div>`;
});
}

function saveProduct(){
let file=pimg.files[0];
let reader=new FileReader();
reader.onload=e=>{
let index=editIndex.value;
let data={name:pname.value,price:+pprice.value,old:+pold.value,cat:pcat.value,rating:+prating.value,img:e.target.result};
if(index===""){products.push(data)}else{products[index]=data}
saveAll();
};
if(file) reader.readAsDataURL(file);
}

function displayAdmin(){
let box=document.getElementById("adminProducts");
box.innerHTML="";
products.forEach((p,i)=>{
box.innerHTML+=`<div class="admin-box">
${p.name}
<button onclick="editProduct(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
<button onclick="deleteProduct(${i})">Ø­Ø°Ù</button>
</div>`;
});
document.getElementById("stats").innerHTML="Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: "+orders.length;
}

function editProduct(i){
let p=products[i];
pname.value=p.name;
pprice.value=p.price;
pold.value=p.old;
pcat.value=p.cat;
prating.value=p.rating;
editIndex.value=i;
}

function deleteProduct(i){products.splice(i,1);saveAll()}

function addToCart(i){cart.push(products[i]);alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©")}

function openCart(){cartPanel.style.display="block";displayCart()}
function closeCart(){cartPanel.style.display="none"}

function displayCart(){
let total=0;
cartItems.innerHTML="";
cart.forEach(p=>{cartItems.innerHTML+=p.name+" - "+p.price+" DH<br>";total+=p.price});
document.getElementById("total").innerText="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: "+total+" DH";
}

function sendOrder(){
let total=cart.reduce((s,p)=>s+p.price,0);
orders.push({name:cname.value,total:total});
saveAll();
let message="Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ğŸ›ï¸%0A";
cart.forEach(p=>{message+=p.name+" - "+p.price+" DH%0A"});
message+="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: "+total+" DH%0AØ§Ù„Ø§Ø³Ù…: "+cname.value+"%0AØ§Ù„Ù‡Ø§ØªÙ: "+cphone.value;
window.open("https://wa.me/"+whatsapp+"?text="+message,"_blank");
cart=[];
closeCart();
}

function openAdmin(){
let pass=prompt("Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©");
if(pass==="2025"){dashboard.style.display="block";displayAdmin()}
}

function closeDashboard(){dashboard.style.display="none"}

let end=new Date(); end.setHours(end.getHours()+24);
setInterval(()=>{
let now=new Date().getTime();
let distance=end-now;
let h=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
let m=Math.floor((distance%(1000*60*60))/(1000*60));
let s=Math.floor((distance%(1000*60))/1000);
document.getElementById("countdown").innerHTML=h+"h "+m+"m "+s+"s";
},1000);

displayCategories();
displayAdmin();
</script>

</body>
</html>