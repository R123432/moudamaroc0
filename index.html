<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MoudaMaroc</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>

body{margin:0;font-family:'Segoe UI',sans-serif;background:#f2f6ff;direction:rtl}
header{background:white;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 10px rgba(0,0,0,.05)}
.logo{font-size:22px;font-weight:bold;color:#0a3d62}
.social a{color:#0a3d62;font-size:20px;margin-left:10px}

.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;padding:20px}

.product{background:white;border-radius:15px;padding:15px;box-shadow:0 10px 25px rgba(0,0,0,.05);transition:.3s}
.product:hover{transform:translateY(-5px)}
.product img{width:100%;height:200px;object-fit:cover;border-radius:10px}
.price{font-weight:bold;color:#0a3d62}
.old{text-decoration:line-through;color:gray;font-size:13px}

button{cursor:pointer;border:none;border-radius:20px;padding:8px 12px;margin-top:6px}
.add-btn{background:#0a3d62;color:white;width:100%}
.cart-btn{position:fixed;bottom:20px;left:20px;background:#0a3d62;color:white;padding:15px;border-radius:50%}
.admin-trigger{position:fixed;top:50%;right:0;background:#0a3d62;color:white;padding:8px;border-radius:10px 0 0 10px;cursor:pointer}

.panel{display:none;position:fixed;top:0;right:0;width:350px;height:100%;background:white;box-shadow:-5px 0 20px rgba(0,0,0,.1);padding:20px;overflow:auto;z-index:1000}
.dashboard{display:none;position:fixed;top:0;right:0;width:420px;height:100%;background:#0a3d62;color:white;padding:20px;overflow:auto;z-index:2000}

input,select{width:100%;padding:8px;margin:5px 0;border-radius:8px;border:1px solid #ddd}

.admin-box{background:white;color:black;padding:8px;border-radius:8px;margin-top:5px}

</style>
</head>

<body>

<header>
<div class="logo">MoudaMaroc</div>
<div>
<a href="https://www.instagram.com/moudamaroc0" target="_blank"><i class="fab fa-instagram"></i></a>
<a href="https://tiktok.com/@moudamaroc0" target="_blank"><i class="fab fa-tiktok"></i></a>
</div>
</header>

<div style="padding:10px">
<select onchange="filterCategory(this.value)">
<option value="all">ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</option>
</select>
</div>

<div class="products" id="products"></div>

<div class="cart-btn" onclick="openCart()"><i class="fas fa-shopping-cart"></i></div>
<div class="admin-trigger" onclick="openAdmin()">âš™</div>

<!-- Ø³Ù„Ø© -->
<div class="panel" id="cartPanel">
<h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
<div id="cartItems"></div>
<h4 id="total"></h4>
<input id="coupon" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…">
<input id="cname" placeholder="Ø§Ù„Ø§Ø³Ù…">
<input id="cphone" placeholder="Ø§Ù„Ù‡Ø§ØªÙ">
<input id="ccity" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©">
<input id="caddress" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
<button style="background:#25D366;color:white;width:100%" onclick="sendOrder()">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
<button onclick="closeCart()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<!-- Dashboard -->
<div class="dashboard" id="dashboard">
<h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

<h3>Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬</h3>
<input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="pprice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯">
<input id="pold" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…">
<input id="pcat" placeholder="Ø§Ù„Ù‚Ø³Ù…">
<input id="editIndex" type="hidden">
<input type="file" id="pimg">
<button onclick="saveProduct()">Ø­ÙØ¸</button>

<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
<div id="adminProducts"></div>

<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª</h3>
<input id="couponCode" placeholder="Ø§Ù„ÙƒÙˆØ¯">
<input id="couponValue" type="number" placeholder="Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %">
<button onclick="addCoupon()">Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¨ÙˆÙ†</button>
<div id="couponList"></div>

<h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
<div id="ordersList"></div>

<h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
<div id="stats"></div>

<button onclick="closeDashboard()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<script>

let products=JSON.parse(localStorage.getItem("products"))||[];
let orders=JSON.parse(localStorage.getItem("orders"))||[];
let coupons=JSON.parse(localStorage.getItem("coupons"))||[];
let cart=[];
let whatsapp="212712120673";

function saveAll(){
localStorage.setItem("products",JSON.stringify(products));
localStorage.setItem("orders",JSON.stringify(orders));
localStorage.setItem("coupons",JSON.stringify(coupons));
displayProducts();
displayAdmin();
}

function displayProducts(){
let box=document.getElementById("products");
box.innerHTML="";
products.forEach((p,i)=>{
box.innerHTML+=`
<div class="product">
<img src="${p.img}">
<h3>${p.name}</h3>
<div class="price">${p.price} DH ${p.old?`<span class="old">${p.old} DH</span>`:''}</div>
<button class="add-btn" onclick="addToCart(${i})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
</div>`;
});
}

function saveProduct(){
let index=document.getElementById("editIndex").value;
let file=pimg.files[0];
if(file){
let reader=new FileReader();
reader.onload=e=>{
if(index===""){
products.push({name:pname.value,price:+pprice.value,old:+pold.value,cat:pcat.value,img:e.target.result});
}else{
products[index]={...products[index],name:pname.value,price:+pprice.value,old:+pold.value,cat:pcat.value,img:e.target.result};
}
saveAll();
};
reader.readAsDataURL(file);
}else{
if(index!==""){
products[index]={...products[index],name:pname.value,price:+pprice.value,old:+pold.value,cat:pcat.value};
saveAll();
}
}
}

function displayAdmin(){
let box=document.getElementById("adminProducts");
box.innerHTML="";
products.forEach((p,i)=>{
box.innerHTML+=`
<div class="admin-box">
${p.name}
<button onclick="editProduct(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
<button onclick="deleteProduct(${i})">Ø­Ø°Ù</button>
</div>`;
});
document.getElementById("couponList").innerHTML=
coupons.map(c=>c.code+" - "+c.value+"%").join("<br>");
let totalProfit=orders.reduce((s,o)=>s+o.total,0);
document.getElementById("stats").innerHTML=
"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: "+orders.length+"<br>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: "+totalProfit+" DH";
}

function editProduct(i){
let p=products[i];
pname.value=p.name;
pprice.value=p.price;
pold.value=p.old;
pcat.value=p.cat;
editIndex.value=i;
}

function deleteProduct(i){products.splice(i,1);saveAll()}

function addCoupon(){
coupons.push({code:couponCode.value,value:+couponValue.value});
saveAll();
}

function addToCart(i){cart.push(products[i]);alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©")}

function openCart(){cartPanel.style.display="block";displayCart()}
function closeCart(){cartPanel.style.display="none"}

function displayCart(){
let total=0;
cartItems.innerHTML="";
cart.forEach(p=>{cartItems.innerHTML+=p.name+" - "+p.price+" DH<br>";total+=p.price});
totalText=total;
document.getElementById("total").innerText="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: "+total+" DH";
}

function sendOrder(){
let total=cart.reduce((s,p)=>s+p.price,0);
let code=document.getElementById("coupon").value;
let found=coupons.find(c=>c.code===code);
if(found){total-=total*(found.value/100)}
orders.push({name:cname.value,total:total,status:"Ø¬Ø¯ÙŠØ¯"});
saveAll();

let message="Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ğŸ›ï¸%0A";
cart.forEach(p=>{message+=p.name+" - "+p.price+" DH%0A"});
message+="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: "+total+" DH%0AØ§Ù„Ø§Ø³Ù…: "+cname.value+"%0AØ§Ù„Ù‡Ø§ØªÙ: "+cphone.value;
window.open("https://wa.me/"+whatsapp+"?text="+message,"_blank");
cart=[];
closeCart();
}

function openAdmin(){
let pass=prompt("Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©");
if(pass==="2025"){dashboard.style.display="block";displayAdmin()}
}

function closeDashboard(){dashboard.style.display="none"}

displayProducts();

</script>

</body>
</html>